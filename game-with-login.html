<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>æ•°å­—æ‰è½åˆå¹¶æ¸¸æˆ</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }\n        .container { max-width: 800px; margin: 0 auto; padding: 20px; }\n        .header { text-align: center; color: white; margin-bottom: 30px; }\n        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }\n        .login-panel, .game-panel { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); margin-bottom: 20px; }\n        .form-group { margin-bottom: 20px; }\n        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }\n        .form-group input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }\n        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 5px; transition: all 0.3s; }\n        .btn-primary { background: #667eea; color: white; }\n        .btn-secondary { background: #6c757d; color: white; }\n        .btn-success { background: #28a745; color: white; }\n        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }\n        .leaderboard { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }\n        .leaderboard h2 { text-align: center; margin-bottom: 20px; color: #333; }\n        .leaderboard-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #eee; }\n        .leaderboard-item:last-child { border-bottom: none; }\n        .rank { font-weight: bold; font-size: 18px; width: 50px; }\n        .rank.gold { color: #FFD700; }\n        .rank.silver { color: #C0C0C0; }\n        .rank.bronze { color: #CD7F32; }\n        .player-name { flex: 1; margin-left: 15px; font-size: 16px; }\n        .score { font-weight: bold; color: #667eea; }\n        .revives { font-size: 14px; color: #666; margin-left: 10px; }\n        .user-info { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; }\n        .hidden { display: none; }\n        .message { padding: 10px; margin: 10px 0; border-radius: 5px; text-align: center; }\n        .message.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }\n        .message.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }\n        .game-canvas { width: 100%; max-width: 400px; height: 600px; border: 2px solid #333; border-radius: 10px; margin: 0 auto; display: block; background: #f0f0f0; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>ğŸ® æ•°å­—æ‰è½åˆå¹¶æ¸¸æˆ</h1>\n            <p>å…¨çƒç©å®¶æ’è¡Œæ¦œ - æŒ‘æˆ˜æœ€é«˜åˆ†ï¼</p>\n        </div>\n\n        <!-- ç™»å½•é¢æ¿ -->\n        <div id=\"loginPanel\" class=\"login-panel\">\n            <h2>ç™»å½•æ¸¸æˆ</h2>\n            <div id=\"loginForm\">\n                <div class=\"form-group\">\n                    <label>ç”¨æˆ·å:</label>\n                    <input type=\"text\" id=\"loginUsername\" placeholder=\"è¾“å…¥ç”¨æˆ·å\">\n                </div>\n                <div class=\"form-group\">\n                    <label>å¯†ç :</label>\n                    <input type=\"password\" id=\"loginPassword\" placeholder=\"è¾“å…¥å¯†ç \">\n                </div>\n                <button class=\"btn btn-primary\" onclick=\"login()\">ç™»å½•</button>\n                <button class=\"btn btn-secondary\" onclick=\"showRegister()\">æ³¨å†Œ</button>\n                <button class=\"btn btn-success\" onclick=\"playAsGuest()\">æ¸¸å®¢æ¨¡å¼</button>\n            </div>\n\n            <div id=\"registerForm\" class=\"hidden\">\n                <div class=\"form-group\">\n                    <label>ç”¨æˆ·å:</label>\n                    <input type=\"text\" id=\"registerUsername\" placeholder=\"è¾“å…¥ç”¨æˆ·å\">\n                </div>\n                <div class=\"form-group\">\n                    <label>å¯†ç :</label>\n                    <input type=\"password\" id=\"registerPassword\" placeholder=\"è¾“å…¥å¯†ç \">\n                </div>\n                <div class=\"form-group\">\n                    <label>ç¡®è®¤å¯†ç :</label>\n                    <input type=\"password\" id=\"confirmPassword\" placeholder=\"ç¡®è®¤å¯†ç \">\n                </div>\n                <button class=\"btn btn-primary\" onclick=\"register()\">æ³¨å†Œ</button>\n                <button class=\"btn btn-secondary\" onclick=\"showLogin()\">è¿”å›ç™»å½•</button>\n            </div>\n\n            <div id=\"message\"></div>\n        </div>\n\n        <!-- æ¸¸æˆé¢æ¿ -->\n        <div id=\"gamePanel\" class=\"game-panel hidden\">\n            <div id=\"userInfo\" class=\"user-info\">\n                <span id=\"welcomeText\">æ¬¢è¿, </span>\n                <span id=\"userStats\"></span>\n                <button class=\"btn btn-secondary\" onclick=\"logout()\" style=\"float: right;\">é€€å‡º</button>\n            </div>\n            \n            <div style=\"text-align: center; margin-bottom: 20px;\">\n                <button class=\"btn btn-primary\" onclick=\"startGame()\">å¼€å§‹æ¸¸æˆ</button>\n                <button class=\"btn btn-secondary\" onclick=\"refreshLeaderboard()\">åˆ·æ–°æ’è¡Œæ¦œ</button>\n            </div>\n\n            <canvas id=\"gameCanvas\" class=\"game-canvas\"></canvas>\n        </div>\n\n        <!-- å…¨çƒæ’è¡Œæ¦œ -->\n        <div class=\"leaderboard\">\n            <h2>ğŸ† å…¨çƒæ’è¡Œæ¦œ TOP 100</h2>\n            <div id=\"leaderboardList\">\n                <div style=\"text-align: center; padding: 20px; color: #666;\">åŠ è½½ä¸­...</div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const API_URL = 'https://your-api-gateway-url.amazonaws.com/prod';\n        let currentUser = null;\n        let isGuest = false;\n\n        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯\n        window.onload = function() {\n            const userData = localStorage.getItem('userData');\n            if (userData) {\n                currentUser = JSON.parse(userData);\n                showGamePanel();\n            }\n            loadLeaderboard();\n        };\n\n        async function login() {\n            const username = document.getElementById('loginUsername').value.trim();\n            const password = document.getElementById('loginPassword').value.trim();\n\n            if (!username || !password) {\n                showMessage('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ', 'error');\n                return;\n            }\n\n            try {\n                showMessage('ç™»å½•ä¸­...', 'success');\n                const response = await fetch(`${API_URL}/login`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ username, password })\n                });\n\n                const data = await response.json();\n                if (response.ok) {\n                    currentUser = data;\n                    localStorage.setItem('userData', JSON.stringify(data));\n                    showMessage('ç™»å½•æˆåŠŸï¼', 'success');\n                    setTimeout(showGamePanel, 1000);\n                } else {\n                    showMessage(data.error || 'ç™»å½•å¤±è´¥', 'error');\n                }\n            } catch (error) {\n                showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');\n            }\n        }\n\n        async function register() {\n            const username = document.getElementById('registerUsername').value.trim();\n            const password = document.getElementById('registerPassword').value.trim();\n            const confirm = document.getElementById('confirmPassword').value.trim();\n\n            if (!username || !password || !confirm) {\n                showMessage('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ', 'error');\n                return;\n            }\n\n            if (password !== confirm) {\n                showMessage('å¯†ç ä¸åŒ¹é…', 'error');\n                return;\n            }\n\n            if (password.length < 6) {\n                showMessage('å¯†ç è‡³å°‘6ä½', 'error');\n                return;\n            }\n\n            try {\n                showMessage('æ³¨å†Œä¸­...', 'success');\n                const response = await fetch(`${API_URL}/register`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ username, password })\n                });\n\n                const data = await response.json();\n                if (response.ok) {\n                    currentUser = data;\n                    localStorage.setItem('userData', JSON.stringify(data));\n                    showMessage('æ³¨å†ŒæˆåŠŸï¼', 'success');\n                    setTimeout(showGamePanel, 1000);\n                } else {\n                    showMessage(data.error || 'æ³¨å†Œå¤±è´¥', 'error');\n                }\n            } catch (error) {\n                showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');\n            }\n        }\n\n        function playAsGuest() {\n            isGuest = true;\n            currentUser = { username: 'Guest', totalScore: 0, reviveCount: 0 };\n            showGamePanel();\n        }\n\n        function showLogin() {\n            document.getElementById('loginForm').classList.remove('hidden');\n            document.getElementById('registerForm').classList.add('hidden');\n            clearMessage();\n        }\n\n        function showRegister() {\n            document.getElementById('loginForm').classList.add('hidden');\n            document.getElementById('registerForm').classList.remove('hidden');\n            clearMessage();\n        }\n\n        function showGamePanel() {\n            document.getElementById('loginPanel').classList.add('hidden');\n            document.getElementById('gamePanel').classList.remove('hidden');\n            \n            const welcomeText = document.getElementById('welcomeText');\n            const userStats = document.getElementById('userStats');\n            \n            welcomeText.textContent = `æ¬¢è¿, ${currentUser.username}${isGuest ? ' (æ¸¸å®¢æ¨¡å¼)' : ''}`;\n            \n            if (!isGuest) {\n                userStats.textContent = `æ€»åˆ†: ${currentUser.totalScore} | å¤æ´»æ¬¡æ•°: ${currentUser reviveCount}`;\n            } else {\n                userStats.textContent = 'æ¸¸å®¢æ¨¡å¼ - åˆ†æ•°ä¸ä¼šä¿å­˜åˆ°æ’è¡Œæ¦œ';\n            }\n        }\n\n        function logout() {\n            currentUser = null;\n            isGuest = false;\n            localStorage.removeItem('userData');\n            document.getElementById('loginPanel').classList.remove('hidden');\n            document.getElementById('gamePanel').classList.add('hidden');\n            showLogin();\n        }\n\n        async function loadLeaderboard() {\n            try {\n                const response = await fetch(`${API_URL}/leaderboard`);\n                const leaderboard = await response.json();\n                displayLeaderboard(leaderboard);\n            } catch (error) {\n                document.getElementById('leaderboardList').innerHTML = \n                    '<div style=\"text-align: center; padding: 20px; color: #666;\">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>';\n            }\n        }\n\n        function displayLeaderboard(leaderboard) {\n            const list = document.getElementById('leaderboardList');\n            \n            if (leaderboard.length === 0) {\n                list.innerHTML = '<div style=\"text-align: center; padding: 20px; color: #666;\">æš‚æ— æ’è¡Œæ¦œæ•°æ®</div>';\n                return;\n            }\n\n            list.innerHTML = leaderboard.map(player => {\n                let rankClass = '';\n                if (player.rank === 1) rankClass = 'gold';\n                else if (player.rank === 2) rankClass = 'silver';\n                else if (player.rank === 3) rankClass = 'bronze';\n\n                return `\n                    <div class=\"leaderboard-item\">\n                        <div class=\"rank ${rankClass}\">#${player.rank}</div>\n                        <div class=\"player-name\">${player.username}</div>\n                        <div class=\"score\">${player.totalScore.toLocaleString()}</div>\n                        <div class=\"revives\">å¤æ´»: ${player.reviveCount}</div>\n                    </div>\n                `;\n            }).join('');\n        }\n\n        function refreshLeaderboard() {\n            loadLeaderboard();\n        }\n\n        function startGame() {\n            // è¿™é‡Œé›†æˆå®é™…çš„æ¸¸æˆé€»è¾‘\n            alert('æ¸¸æˆå¼€å§‹ï¼\\n\\nä½¿ç”¨æ–¹å‘é”®æ§åˆ¶æ–¹å—ç§»åŠ¨\\nç›¸åŒæ•°å­—ä¼šè‡ªåŠ¨åˆå¹¶\\n\\n' + \n                  (isGuest ? 'æ¸¸å®¢æ¨¡å¼ä¸‹åˆ†æ•°ä¸ä¼šä¿å­˜åˆ°æ’è¡Œæ¦œ' : 'ç™»å½•ç”¨æˆ·çš„åˆ†æ•°ä¼šè‡ªåŠ¨ä¿å­˜'));\n        }\n\n        function showMessage(text, type) {\n            const message = document.getElementById('message');\n            message.textContent = text;\n            message.className = `message ${type}`;\n            message.style.display = 'block';\n        }\n\n        function clearMessage() {\n            const message = document.getElementById('message');\n            message.style.display = 'none';\n        }\n    </script>\n</body>\n</html>